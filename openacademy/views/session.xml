<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
    	<!-- Search -->
        <record model="ir.ui.view" id="session_search_view">
            <field name="name">session.search</field>
            <field name="model">openacademy.session</field>
            <field name="arch" type="xml">
				<search>
					<field name="name"/>
					<field name="duration"/>
					<field name="instructor_id"/>
					<field name="course_id"/>
					<field name="attendee_ids"/>
					
					<filter name="my" string="My" domain="[('course_id.responsible_id', '=', uid)]"/>
					
					<group string="Group by">
						<filter string="Instructor" context="{'group_by': 'instructor_id'}"/>
					</group>
				</search>
            </field>
        </record>
        
		<!-- session form view -->
        <record model="ir.ui.view" id="session_form_view">
            <field name="name">session.form</field>
            <field name="model">openacademy.session</field>
            <field name="arch" type="xml">
                <form string="Session Form">
                    <sheet>
                    	<group col="2" colspan="4">
	                        <group string="General">
	                            <field name="course_id"/>
	                            <field name="name"/>
	                            <field name="instructor_id" context="{'default_instructor': True}"/>
	                            <field name="active"/>
	                        </group>
	                        <group string="Schedule">
	                            <field name="start_date"/>
	                            <field name="duration"/>
	                            <field name="end_date"/>
	                            <field name="seats"/>
	                            <field name="taken_seats" widget="progressbar"/>
	                        </group>
                        </group>
                        <notebook>
	                        <page string="Attendees">
	                        	<field name="attendee_ids" nolabel="1" widget="many2many_kanban"/>
	                        </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- session tree view -->
        <record model="ir.ui.view" id="session_tree_view">
            <field name="name">session.tree</field>
            <field name="model">openacademy.session</field>
            <field name="arch" type="xml">
                <tree string="Session List" colors="blue:duration&lt;5;red:duration&gt;=15;green:1==1">
                    <field name="course_id"/>
                    <field name="name"/>
                    <field name="instructor_id"/>
                    <field name="start_date"/>
                    <field name="duration" invisible="1"/>
                    <field name="seats"/>
                    <field name="taken_seats" widget="progressbar"/>
                </tree>
            </field>
        </record>
        
        <!-- calendar view -->
        <record model="ir.ui.view" id="session_calendar_view">
            <field name="name">session.calendar</field>
            <field name="model">openacademy.session</field>
            <field name="arch" type="xml">
				<calendar string="Sessions" date_start="start_date" date_stop="end_date" color="course_id">
                    <field name="name"/>
                </calendar>
            </field>
        </record>
        
    </data>
</openerp>